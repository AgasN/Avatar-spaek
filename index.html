<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#1B7D3A">
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #e3f2fd, #f5f5f5);
      color: #222;
    }

    header {
      background: linear-gradient(90deg, #1B7D3A, #23A85A);
      color: white;
      padding: 60px 20px;
      text-align: center;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    }

    header img.logo {
      width: 160px;
      height: auto;
      display: block;
      margin: 0 auto 15px;
    }

    header h1 {
      font-size: 2.4em;
      font-weight: 700;
      letter-spacing: 1px;
      margin: 0;
      text-transform: uppercase;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.3);
    }

    header p {
      font-size: 1.1em;
      opacity: 0.95;
      margin-top: 8px;
    }

    .container {
      max-width: 900px;
      margin: 40px auto;
      padding: 0 20px;
    }

    .course-info {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }

    .course-info h2 {
      color: #1B7D3A;
      margin-bottom: 20px;
    }

    ul {
      text-align: left;
      line-height: 1.6;
    }

    .price {
      background: #f0f7ff;
      padding: 25px;
      border-radius: 10px;
      text-align: center;
      margin-bottom: 40px;
    }

    .price h3 {
      margin: 10px 0;
    }

    .btn {
      display: inline-block;
      background-color: #1B7D3A;
      color: white;
      padding: 14px 28px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .btn:hover {
      background-color: #145c2d;
      transform: scale(1.05);
    }

    .chat-box {
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    #chat {
      max-height: 350px;
      overflow-y: auto;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 15px;
      text-align: left;
      background: #fafafa;
    }

    .user-msg {
      color: #1B7D3A;
      margin: 8px 0;
    }

    .bot-msg {
      color: #333;
      margin: 8px 0;
    }

    textarea {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      resize: none;
      font-family: inherit;
      font-size: 15px;
    }

    footer {
      background: #1B7D3A;
      color: white;
      text-align: center;
      padding: 20px;
      margin-top: 50px;
      font-size: 0.9em;
    }
  </style>
</head>
<body>

  <header>
    <img src="logo.svg" alt="–õ–æ–≥–æ—Ç–∏–ø –ú–ü–û" class="logo" />
    <h1>–ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ</h1>
    <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è. –†–µ–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏. –ü–æ–±–µ–¥–∞ –≤ —Ç–µ–Ω–¥–µ—Ä–∞—Ö –∏ –±–∏–∑–Ω–µ—Å–µ.</p>
  </header>

  <div class="container">

    <section class="course-info">
      <h2>–ß—Ç–æ –≤–∞—Å –∂–¥–µ—Ç –Ω–∞ –∫—É—Ä—Å–µ</h2>
      <ul>
        <li>3 –ª–µ–∫—Ü–∏–∏ —Å —Å–∂–∞—Ç–æ–π, –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–∏–µ–π –±–µ–∑ –≤–æ–¥—ã;</li>
        <li>3 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–Ω—è—Ç–∏—è —Å –ø–æ–¥–∞—á–µ–π –∑–∞—è–≤–æ–∫ –∏ —É—á–∞—Å—Ç–∏–µ–º –≤ –∞—É–∫—Ü–∏–æ–Ω–µ;</li>
        <li>–ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —á–µ–∫-–ª–∏—Å—Ç—ã;</li>
        <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É 2024‚Äì2025 –≥–æ–¥–æ–≤;</li>
        <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º.</li>
      </ul>
    </section>

    <section class="price">
      <h2>–°—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è</h2>
      <h3>üéì –° —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º ‚Äî 39 900 —Ä—É–±.</h3>
      <h3>üìò –ë–µ–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ ‚Äî 34 900 —Ä—É–±.</h3>
      <a class="btn" href="#">–û—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞—Å—Å—Ä–æ—á–∫—É</a>
    </section>

    <section class="chat-box">
      <h2>–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É –∫—É—Ä—Å–∞</h2>
      <div id="chat"></div>
      <textarea id="question" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." rows="3"></textarea>
      <button class="btn" id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </section>

  </div>

  <footer>
    ¬© 2025 –ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
  </footer>

  <script>
    const SERVER_URL = "https://backend-server-fwx6.onrender.com";
    const input = document.getElementById("question");
    const chat = document.getElementById("chat");
    const sendBtn = document.getElementById("sendBtn");

    sendBtn.addEventListener("click", sendMessage);
    input.addEventListener("keydown", (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === "Enter") sendMessage();
    });

    async function sendMessage() {
      const userMessage = (input.value || "").trim();
      if (!userMessage) return;

      appendLine(`<b>–í—ã:</b> ${escapeHtml(userMessage)}`, "user-msg");
      input.value = "";
      scrollBottom();

      const thinkingId = appendLine(`<b>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç:</b> ‚Ä¶`, "bot-msg");
      disableSend(true);

      try {
        const res = await fetch(`${SERVER_URL}/chat`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: userMessage })
        });

        if (!res.ok) {
          const errText = await res.text();
          replaceLine(thinkingId, `<b>–û—à–∏–±–∫–∞:</b> ${res.status} ‚Äî ${escapeHtml(errText)}`);
          return;
        }

        const data = await res.json();
        const answer = (data && typeof data.text === "string") ? data.text : "–û—Ç–≤–µ—Ç –ø—É—Å—Ç–æ–π.";
        replaceLine(thinkingId, `<b>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç:</b> ${escapeHtml(answer)}`);
      } catch (err) {
        replaceLine(thinkingId, `<b>–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:</b> ${escapeHtml(err?.message || String(err))}`);
      } finally {
        disableSend(false);
        scrollBottom();
      }
    }

    function appendLine(html, cls) {
      const p = document.createElement("p");
      p.className = cls;
      p.innerHTML = html;
      chat.appendChild(p);
      return p;
    }

    function replaceLine(el, html) {
      if (el) el.innerHTML = html;
    }

    function scrollBottom() {
      chat.scrollTop = chat.scrollHeight;
    }

    function disableSend(disabled) {
      sendBtn.disabled = disabled;
      sendBtn.textContent = disabled ? "–û—Ç–ø—Ä–∞–≤–∫–∞..." : "–û—Ç–ø—Ä–∞–≤–∏—Ç—å";
    }

    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }
  </script>

</body>
</html>

<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ</title>

  <link rel="icon" href="./favicon.ico" sizes="any">
  <link rel="shortcut icon" href="./favicon.ico" type="image/x-icon">
  <link rel="apple-touch-icon" href="./app-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./logo 32x32.png">
  <link rel="icon" type="image/png" sizes="64x64" href="./logo 64x64.png">
  <link rel="icon" type="image/png" sizes="128x128" href="./logo 128x128.png">
  <link rel="icon" type="image/png" sizes="256x256" href="./logo 256x256.png">
  <link rel="icon" type="image/png" sizes="512x512" href="./logo 512x512.png">
  <link rel="mask-icon" href="./logo.svg" color="#1B7D3A">
  <link rel="manifest" href="./site.webmanifest">
  <meta name="theme-color" content="#1B7D3A">

  <style>
    :root {
      --brand: #1B7D3A;
      --brand2: #23A85A;
      --bg1: #e3f2fd;
      --bg2: #f5f5f5;
      --text: #222;
      --muted: #444;
      --card: #fff;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      color: var(--text);
      background: linear-gradient(to right, var(--bg1), var(--bg2));
      font-size: clamp(0.75rem, 0.8vw + 0.7rem, 0.9rem);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    header {
      background: linear-gradient(90deg, var(--brand), var(--brand2));
      color: #fff;
      text-align: center;
      padding: clamp(40px, 8vw, 60px) 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,.2);
    }
    header .logo {
      width: clamp(100px, 20vw, 140px);
      height: auto;
      display: block;
      margin: 0 auto clamp(10px, 2vw, 15px);
    }
    header h1 {
      font-weight: 700;
      text-transform: uppercase;
      text-shadow: 2px 2px 6px rgba(0,0,0,.3);
      font-size: clamp(1.2rem, 3vw + 0.5rem, 1.8rem);
      line-height: 1.2;
      word-break: break-word;
      hyphens: auto;
      max-width: 95%;
      margin: 0 auto;
      text-wrap: balance;
    }
    header p {
      margin-top: clamp(6px, 1.5vw, 10px);
      font-size: clamp(0.9rem, 1vw + 0.6rem, 1.1rem);
      opacity: 0.95;
    }
    .container {
      max-width: 900px;
      margin: clamp(24px, 6vw, 50px) auto;
      padding: 0 clamp(14px, 4vw, 20px);
    }
    .card {
      background: var(--card);
      padding: clamp(18px, 4vw, 30px);
      border-radius: 14px;
      box-shadow: 0 4px 16px rgba(0,0,0,.1);
      margin-bottom: clamp(20px, 6vw, 40px);
    }
    .h2 {
      color: var(--brand);
      font-size: clamp(1rem, 2vw + 0.6rem, 1.3rem);
      margin-bottom: clamp(10px, 2vw, 16px);
      text-align: center;
      line-height: 1.2;
    }
    ul {
      padding-left: 1.1em;
      line-height: 1.6;
      font-size: clamp(0.8rem, 1vw + 0.6rem, 0.9rem);
    }
    .price {
      background: #f0f7ff;
      text-align: center;
      font-size: clamp(0.8rem, 1vw + 0.6rem, 0.9rem);
    }
    .price h3 { margin: clamp(6px, 1.5vw, 10px) 0; }
    .cta {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: clamp(10px, 2.5vw, 14px);
      margin-top: clamp(12px, 3vw, 18px);
    }
    .btn {
      display: inline-block;
      padding: clamp(10px, 2.4vw, 12px) clamp(16px, 4.5vw, 22px);
      border-radius: 10px;
      text-decoration: none;
      font-size: clamp(0.8rem, 1vw + 0.6rem, 0.95rem);
      transition: transform .15s ease, background .2s ease, color .2s ease, border-color .2s ease;
      text-align: center;
      border: 2px solid transparent;
    }
    .btn-primary { background: var(--brand); color: #fff; }
    .btn-primary:hover { background: #145c2d; transform: translateY(-1px); }
    .btn-outline { background: transparent; color: var(--brand); border-color: var(--brand); }
    .btn-outline:hover { background: var(--brand); color: #fff; transform: translateY(-1px); }
    .chat {
      max-height: clamp(240px, 45vh, 380px);
      overflow-y: auto;
      padding: clamp(6px, 1.5vw, 10px);
      border: 1px solid #ccc;
      border-radius: 10px;
      background: #fafafa;
      margin-bottom: clamp(10px, 3vw, 16px);
      font-size: clamp(0.8rem, 1vw + 0.6rem, 0.9rem);
      text-align: left;
    }
    .user-msg { color: var(--brand); margin: 8px 0; }
    .bot-msg { color: var(--muted); margin: 8px 0; }
    .actions {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: clamp(8px, 2vw, 12px);
      align-items: center;
      margin-top: clamp(10px, 3vw, 16px);
    }
    textarea {
      width: 100%;
      padding: clamp(8px, 2vw, 12px);
      border-radius: 8px;
      border: 1px solid #ccc;
      font-family: inherit;
      font-size: clamp(0.8rem, 1vw + 0.6rem, 0.9rem);
      resize: none;
      min-height: 80px;
    }
    .btn-send {
      background: var(--brand);
      color: #fff;
      padding: clamp(8px, 2vw, 12px) clamp(16px, 4vw, 22px);
      border-radius: 8px;
      font-size: clamp(0.8rem, 1vw + 0.6rem, 0.9rem);
      border: none;
      cursor: pointer;
      transition: transform .15s ease, background .2s ease;
    }
    .btn-send:hover { background: #145c2d; transform: translateY(-1px); }
    @media (max-width: 640px) {
      .cta { grid-template-columns: 1fr; }
      .actions { grid-template-columns: 1fr; }
      .btn, .btn-send { width: 100%; }
      header h1 { font-size: clamp(1rem, 5vw + 0.6rem, 1.3rem); }
    }
    footer {
      background: var(--brand);
      color: #fff;
      text-align: center;
      padding: clamp(16px, 4vw, 24px);
      font-size: clamp(0.7rem, 0.8vw + 0.6rem, 0.85rem);
      margin-top: clamp(24px, 6vw, 50px);
    }
  </style>
</head>
<body>
  <header>
    <picture>
      <source srcset="./logo.svg" type="image/svg+xml">
      <img src="./mpo logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ú–ü–û" class="logo">
    </picture>
    <h1>–ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ</h1>
    <p>–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è. –†–µ–∞–ª—å–Ω—ã–µ –Ω–∞–≤—ã–∫–∏.</p>
  </header>

  <div class="container">
    <section class="card">
      <h2 class="h2">–ß—Ç–æ –≤–∞—Å –∂–¥–µ—Ç –Ω–∞ –∫—É—Ä—Å–µ</h2>
      <ul>
        <li>3 –ª–µ–∫—Ü–∏–∏ —Å —Å–∂–∞—Ç–æ–π, –∞–∫—Ç—É–∞–ª—å–Ω–æ–π —Ç–µ–æ—Ä–∏–µ–π –±–µ–∑ –≤–æ–¥—ã;</li>
        <li>3 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–Ω—è—Ç–∏—è —Å –ø–æ–¥–∞—á–µ–π –∑–∞—è–≤–æ–∫ –∏ —É—á–∞—Å—Ç–∏–µ–º –≤ –∞—É–∫—Ü–∏–æ–Ω–µ;</li>
        <li>–ì–æ—Ç–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ —á–µ–∫-–ª–∏—Å—Ç—ã;</li>
        <li>–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤—É 2024‚Äì2025 –≥–æ–¥–æ–≤;</li>
        <li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –ø–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º.</li>
      </ul>
    </section>

    <section class="card price">
      <h2 class="h2">–°—Ç–æ–∏–º–æ—Å—Ç—å —É—á–∞—Å—Ç–∏—è</h2>
      <h3>üéì –° —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º ‚Äî 39 900 —Ä—É–±.</h3>
      <h3>üìò –ë–µ–∑ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ ‚Äî 34 900 —Ä—É–±.</h3>
      <div class="cta">
        <a class="btn btn-primary" href="#">–ö—É–ø–∏—Ç—å —Å–æ —Å–∫–∏–¥–∫–æ–π</a>
        <a class="btn btn-outline" href="#">–û—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞—Å—Å—Ä–æ—á–∫—É</a>
      </div>
    </section>

    <section class="card">
      <h2 class="h2">–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É –∫—É—Ä—Å–∞</h2>
      <div id="chat" class="chat"></div>
      <div class="actions">
        <textarea id="question" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..." rows="3"></textarea>
        <button class="btn-send" id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
      </div>
    </section>
  </div>

  <footer>
    ¬© 2025 –ú–µ–∂–æ—Ç—Ä–∞—Å–ª–µ–≤–æ–µ –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –û–±—É—á–µ–Ω–∏–µ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
  </footer>

  <script>
    const SERVER_URL = "https://backend-server-fwx6.onrender.com";
    const input = document.getElementById("question");
    const chat = document.getElementById("chat");
    const sendBtn = document.getElementById("sendBtn");

    sendBtn.addEventListener("click", sendMessage);
    input.addEventListener("keydown", (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === "Enter") sendMessage();
    });

    async function sendMessage() {
      const userMessage = (input.value || "").trim();
      if (!userMessage) return;
      appendLine(`<b>–í—ã:</b> ${escapeHtml(userMessage)}`, "user-msg");
      input.value = "";
      scrollBottom();
      const thinkingId = appendLine(`<b>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç:</b> ‚Ä¶`, "bot-msg");
      disableSend(true);
      try {
        const res = await fetch(`${SERVER_URL}/chat`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: userMessage })
        });
        if (!res.ok) {
          const errText = await res.text();
          replaceLine(thinkingId, `<b>–û—à–∏–±–∫–∞:</b> ${res.status} ‚Äî ${escapeHtml(errText)}`);
          return;
        }
        const data = await res.json();
        const answer = (data && typeof data.text === "string") ? data.text : "–û—Ç–≤–µ—Ç –ø—É—Å—Ç–æ–π.";
        replaceLine(thinkingId, `<b>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç:</b> ${escapeHtml(answer)}`);
      } catch (err) {
        replaceLine(thinkingId, `<b>–û—à–∏–±–∫–∞ —Å–µ—Ç–∏:</b> ${escapeHtml(err?.message || String(err))}`);
      } finally {
        disableSend(false);
        scrollBottom();
      }
    }

    function appendLine(html, cls) {
      const p = document.createElement("p");
      p.className = cls;
      p.innerHTML = html;
      chat.appendChild(p);
      return p;
    }
    function replaceLine(el, html) { if (el) el.innerHTML = html }
    function scrollBottom() { chat.scrollTop = chat.scrollHeight }
    function disableSend(disabled) {
      sendBtn.disabled = disabled;
      sendBtn.textContent = disabled ? "–û—Ç–ø—Ä–∞–≤–∫–∞..." : "–û—Ç–ø—Ä–∞–≤–∏—Ç—å";
    }
    function escapeHtml(str) {
      return String(str)
        .replaceAll("&", "&amp;")
        .replaceAll("<", "&lt;")
        .replaceAll(">", "&gt;")
        .replaceAll('"', "&quot;")
        .replaceAll("'", "&#039;");
    }
  </script>
</body>
</html>
